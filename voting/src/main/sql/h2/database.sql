CREATE TABLE Ballot (id INTEGER NOT NULL, heldAt DATE NOT NULL, name VARCHAR(255) NOT NULL, pollClosed TIMESTAMP WITH TIME ZONE, pollOpened TIMESTAMP WITH TIME ZONE, status VARCHAR(20) NOT NULL, optLock INTEGER, PRIMARY KEY (id));
CREATE TABLE BallotNominee (id INTEGER NOT NULL, name VARCHAR(255) NOT NULL, shortKey VARCHAR(3), optLock INTEGER, BALLOT_ID INTEGER, PRIMARY KEY (id));
CREATE TABLE BallotUser (id INTEGER NOT NULL, isAdmin BOOLEAN NOT NULL, isCounter BOOLEAN NOT NULL, name VARCHAR(255), USERID VARCHAR(70) NOT NULL, optLock INTEGER, BALLOT_ID INTEGER, PRIMARY KEY (id), CONSTRAINT UC_USER UNIQUE (BALLOT_ID, USERID));
CREATE TABLE BallotVote (id INTEGER NOT NULL, castedVotes VARCHAR(4000), createdAt TIMESTAMP WITH TIME ZONE, createdBy VARCHAR(70), voteNr INTEGER NOT NULL, optLock INTEGER, BALLOT_ID INTEGER, PRIMARY KEY (id));
CREATE TABLE SEQUENCES (ID VARCHAR(255) NOT NULL, SEQUENCE_VALUE BIGINT, PRIMARY KEY (ID));
ALTER TABLE BallotNominee ADD FOREIGN KEY (BALLOT_ID) REFERENCES Ballot (id);
ALTER TABLE BallotUser ADD FOREIGN KEY (BALLOT_ID) REFERENCES Ballot (id);
ALTER TABLE BallotVote ADD FOREIGN KEY (BALLOT_ID) REFERENCES Ballot (id);
